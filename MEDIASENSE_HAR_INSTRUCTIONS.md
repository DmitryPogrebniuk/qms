# –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è: –∑–Ω—è—Ç—Ç—è HAR –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—ñ–Ω—É MediaSense

–Ø–∫—â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ª–æ–≥—ñ–Ω (Playwright) –Ω–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å —Ñ–æ—Ä–º—É –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ MediaSense, –º–æ–∂–Ω–∞ –ø—ñ–¥–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ –ø—ñ–¥ –≤–∞—à—É –≤–µ—Ä—Å—ñ—é. –î–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω HAR –∑ –±—Ä–∞—É–∑–µ—Ä–∞ –∑ —É—Å–ø—ñ—à–Ω–∏–º –ª–æ–≥—ñ–Ω–æ–º, –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è–º —ñ —Å–∫–∞—á—É–≤–∞–Ω–Ω—è–º.

## –©–æ –∑–Ω—è—Ç–∏ –≤ HAR

1. **–í—ñ–¥–∫—Ä–∏—Ç–∏ MediaSense –≤ –±—Ä–∞—É–∑–µ—Ä—ñ** (Chrome/Edge): `https://<MEDIASENSE_HOST>:<PORT>/`
2. **–£–≤—ñ–º–∫–Ω—É—Ç–∏ –∑–∞–ø–∏—Å –º–µ—Ä–µ–∂—ñ:**
   - DevTools (F12) ‚Üí –≤–∫–ª–∞–¥–∫–∞ **Network**
   - –ü–æ—Å—Ç–∞–≤–∏—Ç–∏ –≥–∞–ª–æ—á–∫—É **Preserve log**
   - –û—á–∏—Å—Ç–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ (—ñ–∫–æ–Ω–∫–∞ üö´)
3. **–í–∏–∫–æ–Ω–∞—Ç–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å:**
   - –£–≤—ñ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É (–ª–æ–≥—ñ–Ω/–ø–∞—Ä–æ–ª—å)
   - –í—ñ–¥–∫—Ä–∏—Ç–∏ –∑–∞–ø–∏—Å —ñ **–≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏** –∞—É–¥—ñ–æ (–∞–±–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ –≥—Ä–∞–≤—Ü–µ–º)
   - **–°–∫–∞—á–∞—Ç–∏** –æ–¥–∏–Ω –∑–∞–ø–∏—Å (MP3 –∞–±–æ WAV)
4. **–ó–±–µ—Ä–µ–≥—Ç–∏ HAR:**
   - –ü—Ä–∞–≤–æ—é –∫–Ω–æ–ø–∫–æ—é –ø–æ —Å–ø–∏—Å–∫—É –∑–∞–ø–∏—Ç—ñ–≤ ‚Üí **Save all as HAR with content**
   - –ó–±–µ—Ä–µ–≥—Ç–∏ —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `mediasense-login-playback-download.har`

## –ö—É–¥–∏ –ø–æ–∫–ª–∞—Å—Ç–∏ —Ñ–∞–π–ª

–ü–æ–∫–ª–∞–¥—ñ—Ç—å HAR —É –∫–æ—Ä—ñ–Ω—å –ø—Ä–æ–µ–∫—Ç—É –∞–±–æ –≤ –ø–∞–ø–∫—É `docs/`:

- `mediasense-login-playback-download.har`
- –∞–±–æ `docs/mediasense.har`

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –º–æ–∂–Ω–∞ –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ HAR —ñ –≤–∏–ø–∏—Å–∞—Ç–∏:

- —Ç–æ—á–Ω–∏–π **URL —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ª–æ–≥—ñ–Ω—É** (—è–∫—â–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ `https://host:port/`)
- **—Å–µ–ª–µ–∫—Ç–æ—Ä–∏** –ø–æ–ª—ñ–≤ –ª–æ–≥—ñ–Ω—É/–ø–∞—Ä–æ–ª—è —Ç–∞ –∫–Ω–æ–ø–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `#username`, `input[name="login"]`)
- –ø—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ ‚Äî URL –¥–ª—è stream/download —ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–ü—ñ—Å–ª—è –∞–Ω–∞–ª—ñ–∑—É HAR –º–æ–∂–Ω–∞ –∑–∞–¥–∞—Ç–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ –±–µ–∑ –∑–º—ñ–Ω–∏ –∫–æ–¥—É (–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ API –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏):

| –ó–º—ñ–Ω–Ω–∞ | –û–ø–∏—Å | –ü—Ä–∏–∫–ª–∞–¥ |
|--------|------|---------|
| `MEDIASENSE_LOGIN_URL` | –ü–æ–≤–Ω–∏–π URL —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ª–æ–≥—ñ–Ω—É | `https://192.168.200.133:8440/login` |
| `MEDIASENSE_USERNAME_SELECTOR` | CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä –ø–æ–ª—è –ª–æ–≥—ñ–Ω—É (—á–µ—Ä–µ–∑ –∫–æ–º—É ‚Äî –∫—ñ–ª—å–∫–∞ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤) | `input[name="j_username"], #username` |
| `MEDIASENSE_PASSWORD_SELECTOR` | CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä –ø–æ–ª—è –ø–∞—Ä–æ–ª—è | `input[name="j_password"], #password` |
| `MEDIASENSE_SUBMIT_SELECTOR` | CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä –∫–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥—É (–æ–ø—Ü—ñ–π–Ω–æ) | `button[type="submit"]` |

–ü—Ä–∏–∫–ª–∞–¥ —É `.env` –∞–±–æ docker-compose:

```env
MEDIASENSE_LOGIN_URL=https://192.168.200.133:8440/
MEDIASENSE_USERNAME_SELECTOR=input[name="j_username"]
MEDIASENSE_PASSWORD_SELECTOR=input[name="j_password"]
```

–Ø–∫—â–æ HAR –≤–∂–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ ‚Äî –Ω–∞–ø–∏—à—ñ—Ç—å –ø—É—Ç—å –¥–æ —Ñ–∞–π–ª—É, —ñ –º–æ–∂–Ω–∞ –≤–∏–ø–∏—Å–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –≤–∞—à–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞.
