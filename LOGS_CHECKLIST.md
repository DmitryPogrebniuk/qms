# –ß–µ–∫–ª–∏—Å—Ç –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –ª–æ–≥—ñ–≤ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ MediaSense

**–î–∞—Ç–∞:** 26 —Å—ñ—á–Ω—è 2026  
**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–±–ª–µ–º–∏:** MediaSense –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –≤ –ë–î + —ñ–Ω—à—ñ –ø—Ä–æ–±–ª–µ–º–∏

---

## üî¥ –ö–†–ò–¢–ò–ß–ù–û (–ø–æ—Ç—Ä—ñ–±–Ω—ñ –Ω–µ–≥–∞–π–Ω–æ)

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó MediaSense –≤ –ë–î

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
sudo ./check-mediasense-config.sh
```

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î:**
- –ß–∏ —ñ—Å–Ω—É—î –∑–∞–ø–∏—Å MediaSense –≤ –ë–î
- –ß–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ settings (apiUrl, apiKey, apiSecret)
- –ß–∏ —É–≤—ñ–º–∫–Ω–µ–Ω–æ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é (isEnabled)

**–Ø–∫—â–æ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ:**
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —á–µ—Ä–µ–∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å: `http://localhost:5173` ‚Üí Settings ‚Üí Integrations ‚Üí MediaSense
- –ê–±–æ —á–µ—Ä–µ–∑ API (–ø–æ—Ç—Ä—ñ–±–µ–Ω JWT token)

---

### 2. –õ–æ–≥–∏ Playwright/Cookie Service

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
sudo docker compose -f infra/docker-compose.yml logs api | grep -i "cookie\|playwright\|browser\|chromium\|web interface\|MediaSenseCookieService" | tail -50
```

**–©–æ —à—É–∫–∞—Ç–∏:**
- `[MediaSenseCookieService]` - –ª–æ–≥–∏ —Å–µ—Ä–≤—ñ—Å—É
- `Fetching JSESSIONID from web interface` - —Å–ø—Ä–æ–±–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ cookie
- `Browser launched successfully` - –±—Ä–∞—É–∑–µ—Ä –∑–∞–ø—É—â–µ–Ω–æ
- `Browser launch failed` - –ø–æ–º–∏–ª–∫–∏ –∑–∞–ø—É—Å–∫—É –±—Ä–∞—É–∑–µ—Ä–∞
- `Login form fields not found` - –ø—Ä–æ–±–ª–µ–º–∏ –∑ —Ñ–æ—Ä–º–æ—é –ª–æ–≥—ñ–Ω—É
- `JSESSIONID cookie not found` - cookie –Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–æ

**–Ø–∫—â–æ –ª–æ–≥—ñ–≤ –Ω–µ–º–∞—î:**
- Playwright automation –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è
- –ú–æ–∂–ª–∏–≤–æ CookieService –Ω–µ —ñ–Ω–∂–µ–∫—Ç–∏—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ú–æ–∂–ª–∏–≤–æ –±—Ä–∞—É–∑–µ—Ä –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π

---

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ Playwright –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
sudo docker compose -f infra/docker-compose.yml exec api which chromium
sudo docker compose -f infra/docker-compose.yml exec api chromium --version
```

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**
- Chromium –º–∞—î –±—É—Ç–∏ –≤ `/usr/bin/chromium`
- –í–µ—Ä—Å—ñ—è –º–∞—î –±—É—Ç–∏ –ø–æ–∫–∞–∑–∞–Ω–∞

**–Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ:**
- –ü–æ—Ç—Ä—ñ–±–µ–Ω rebuild –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: `sudo docker compose -f infra/docker-compose.yml build --no-cache api`

---

### 4. –î–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ –∑ 404 –ø–æ–º–∏–ª–∫–æ—é

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
sudo docker compose -f infra/docker-compose.yml logs api | grep -A 10 -B 5 "404\|j_security_check\|login.*failed\|Request failed" | tail -100
```

**–©–æ —à—É–∫–∞—Ç–∏:**
- –Ø–∫–∏–π —Ç–æ—á–Ω–æ endpoint –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è
- –ß–æ–º—É –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è 404
- –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π URL
- HTML –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ Cisco (—è–∫—â–æ —î)

---

## üü° –í–ê–ñ–õ–ò–í–û (–¥–ª—è –ø–æ–≤–Ω–æ—ó –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)

### 5. –í—Å—ñ –ª–æ–≥–∏ MediaSense –∑ –¥–µ—Ç–∞–ª—è–º–∏

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
sudo docker compose -f infra/docker-compose.yml logs api | grep -i "mediasense" | tail -200
```

**–©–æ —à—É–∫–∞—Ç–∏:**
- –í—Å—ñ —Å–ø—Ä–æ–±–∏ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- –ü–æ–º–∏–ª–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
- –£—Å–ø—ñ—à–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
- Correlation IDs –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥—É

---

### 6. –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∑ –ë–î

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
sudo ./check-sync-status.sh
```

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î:**
- –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó (SUCCESS, FAILED, IN_PROGRESS)
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö/—Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤
- –û—Å—Ç–∞–Ω–Ω—ñ–π —á–∞—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
- –ü–æ–º–∏–ª–∫–∏ (—è–∫—â–æ —î)

---

### 7. –õ–æ–≥–∏ –ø–æ–º–∏–ª–æ–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É –±—Ä–∞—É–∑–µ—Ä–∞

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
sudo docker compose -f infra/docker-compose.yml logs api | grep -i "browser\|chromium\|playwright\|launch.*failed\|executable.*not.*found" | tail -50
```

**–©–æ —à—É–∫–∞—Ç–∏:**
- –ü–æ–º–∏–ª–∫–∏ –∑–∞–ø—É—Å–∫—É –±—Ä–∞—É–∑–µ—Ä–∞
- –ü—Ä–æ–±–ª–µ–º–∏ –∑ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø—É
- –ü—Ä–æ–±–ª–µ–º–∏ –∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏
- –ü–æ–º–∏–ª–∫–∏ –∑ executable path

---

## üü¢ –ö–û–†–ò–°–ù–û (–¥–ª—è –≥–ª–∏–±–æ–∫–æ—ó –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)

### 8. Network traffic capture

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
# –ó–∞—Ö–æ–ø–ª–µ–Ω–Ω—è —Ç—Ä–∞—Ñ—ñ–∫—É –¥–æ MediaSense
sudo tcpdump -i any -A -s 0 'host 192.168.200.133 and port 8440' -w mediasense-traffic.pcap
```

**–©–æ –ø–æ–∫–∞–∑—É—î:**
- –¢–æ—á–Ω—ñ HTTP –∑–∞–ø–∏—Ç–∏ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- Cookies –≤ headers
- –ü–æ–≤–Ω—ñ response body

---

### 9. –î–µ—Ç–∞–ª—å–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞)

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
sudo ./diagnose-mediasense-detailed.sh
```

**–©–æ —Ä–æ–±–∏—Ç—å:**
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –≤ –ë–î
- –¢–µ—Å—Ç—É—î –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
- –¢–µ—Å—Ç—É—î —Ñ–æ—Ä–º–∏ –ª–æ–≥—ñ–Ω—É
- –¢–µ—Å—Ç—É—î endpoints –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î Playwright
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î –ª–æ–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó

---

### 10. –ó–±—ñ—Ä –≤—Å—ñ—Ö –ª–æ–≥—ñ–≤

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
sudo ./collect-mediasense-logs.sh
```

**–©–æ –∑–±–∏—Ä–∞—î:**
- –í—Å—ñ –ª–æ–≥–∏ API
- –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó
- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
- –¢–µ—Å—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è `mediasense-logs-YYYYMMDD-HHMMSS/`
- –í—Å—ñ –ª–æ–≥–∏ –∑—ñ–±—Ä–∞–Ω—ñ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ
- –ú–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∞—Ä—Ö—ñ–≤: `tar -czf mediasense-logs.tar.gz mediasense-logs-*/`

---

## –ü–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

### –ö—Ä–æ–∫ 1: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
```bash
sudo ./check-mediasense-config.sh
```

**–Ø–∫—â–æ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ:**
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ MediaSense —á–µ—Ä–µ–∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–±–æ API
- –ü–æ–≤—Ç–æ—Ä—ñ—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫—É

### –ö—Ä–æ–∫ 2: –î–µ—Ç–∞–ª—å–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
sudo ./diagnose-mediasense-detailed.sh
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∫–∞–∂–µ:**
- –ß–∏ –ø—Ä–∞—Ü—é—î –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ß–∏ –ø—Ä–∞—Ü—é—é—Ç—å endpoints
- –ß–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π Playwright
- –ß–∏ —î –ø–æ–º–∏–ª–∫–∏

### –ö—Ä–æ–∫ 3: –ó–±—ñ—Ä –≤—Å—ñ—Ö –ª–æ–≥—ñ–≤ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
```bash
sudo ./collect-mediasense-logs.sh
```

**–î–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –ª–æ–≥—ñ–≤:**
```bash
tar -czf mediasense-logs.tar.gz mediasense-logs-*/
```

---

## –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞: "MediaSense –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –≤ –ë–î"

**–†—ñ—à–µ–Ω–Ω—è:**
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å: `http://localhost:5173`
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ Settings ‚Üí Integrations ‚Üí MediaSense
3. –í–≤–µ–¥—ñ—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
   - API URL: `https://192.168.200.133:8440`
   - API Key: –≤–∞—à username
   - API Secret: –≤–∞—à password
   - Allow Self-Signed: `true`
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Save

### –ü—Ä–æ–±–ª–µ–º–∞: "Chromium –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ"

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# Rebuild –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
sudo docker compose -f infra/docker-compose.yml build --no-cache api
sudo docker compose -f infra/docker-compose.yml up -d api
```

### –ü—Ä–æ–±–ª–µ–º–∞: "404 Not Found" –ø—Ä–∏ –ª–æ–≥—ñ–Ω—ñ

**–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:**
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π endpoint
- MediaSense –≤–µ—Ä—Å—ñ—è –º–∞—î —ñ–Ω—à—ñ endpoints
- –ü—Ä–æ–±–ª–µ–º–∏ –∑ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—é

**–†—ñ—à–µ–Ω–Ω—è:**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –∑ –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞–ø–∏—Ç—É
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
- –ú–æ–∂–ª–∏–≤–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ endpoints –≤ –∫–æ–¥—ñ

### –ü—Ä–æ–±–ª–µ–º–∞: "–õ–æ–≥–∏ cookie service –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"

**–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:**
- Playwright automation –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è
- CookieService –Ω–µ —ñ–Ω–∂–µ–∫—Ç–∏—Ç—å—Å—è
- –ü–æ–º–∏–ª–∫–∏ –Ω–µ –ª–æ–≥—É—é—Ç—å—Å—è

**–†—ñ—à–µ–Ω–Ω—è:**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π Playwright
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –∑–∞–ø—É—Å–∫—É API
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ CookieService –¥–æ–¥–∞–Ω–æ –≤ –º–æ–¥—É–ª—å

---

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
sudo ./check-mediasense-config.sh

# 2. –î–µ—Ç–∞–ª—å–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
sudo ./diagnose-mediasense-detailed.sh

# 3. –ó–±—ñ—Ä –≤—Å—ñ—Ö –ª–æ–≥—ñ–≤ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
sudo ./collect-mediasense-logs.sh
```

---

**–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:** 26 —Å—ñ—á–Ω—è 2026
